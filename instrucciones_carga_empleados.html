<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plantilla de Carga Masiva de Empleados</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        .section {
            margin-bottom: 30px;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #667eea;
            background: #f8f9fa;
        }
        .section h2 {
            color: #667eea;
            margin-top: 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-weight: 600;
        }
        tr:hover {
            background-color: #f5f5f5;
        }
        .required {
            color: #e74c3c;
            font-weight: bold;
        }
        .optional {
            color: #27ae60;
        }
        .command-box {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            overflow-x: auto;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            color: #856404;
        }
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            color: #155724;
        }
        .info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            color: #0c5460;
        }
        .download-btn {
            display: inline-block;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 12px 24px;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 600;
            margin: 10px 5px;
            transition: transform 0.2s;
        }
        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }
        .steps {
            counter-reset: step-counter;
        }
        .step {
            counter-increment: step-counter;
            position: relative;
            padding-left: 50px;
            margin-bottom: 20px;
        }
        .step::before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: 0;
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        .format-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }
        .format-example {
            background: white;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #dee2e6;
        }
        .format-example strong {
            color: #667eea;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìä Plantilla de Carga Masiva de Empleados</h1>
        
        <div class="section">
            <h2>üéØ Prop√≥sito</h2>
            <p>Esta herramienta te permite cargar m√∫ltiples empleados de una sola vez usando un archivo CSV. Ideal para migrar datos existentes o realizar cargas iniciales masivas.</p>
        </div>

        <div class="section">
            <h2>üìã Estructura del Archivo CSV</h2>
            <table>
                <thead>
                    <tr>
                        <th>Campo</th>
                        <th>Descripci√≥n</th>
                        <th>Tipo</th>
                        <th>Ejemplo</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="required">nombre</span></td>
                        <td>Nombre del empleado</td>
                        <td>Requerido</td>
                        <td>Juan</td>
                    </tr>
                    <tr>
                        <td><span class="required">apellido</span></td>
                        <td>Apellido del empleado</td>
                        <td>Requerido</td>
                        <td>P√©rez</td>
                    </tr>
                    <tr>
                        <td><span class="required">dni</span></td>
                        <td>Documento Nacional de Identidad</td>
                        <td>Requerido</td>
                        <td>12345678</td>
                    </tr>
                    <tr>
                        <td><span class="required">email</span></td>
                        <td>Email corporativo</td>
                        <td>Requerido</td>
                        <td>juan.perez@empresa.com</td>
                    </tr>
                    <tr>
                        <td><span class="required">puesto</span></td>
                        <td>Cargo del empleado</td>
                        <td>Requerido</td>
                        <td>Analista de Sistemas</td>
                    </tr>
                    <tr>
                        <td><span class="optional">telefono</span></td>
                        <td>N√∫mero de tel√©fono</td>
                        <td>No disponible</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td><span class="optional">area</span></td>
                        <td>√Årea o departamento</td>
                        <td>Opcional</td>
                        <td>Tecnolog√≠a</td>
                    </tr>
                    <tr>
                        <td><span class="optional">gerencia</span></td>
                        <td>Gerencia a la que pertenece</td>
                        <td>Opcional</td>
                        <td>Operaciones</td>
                    </tr>
                    <tr>
                        <td><span class="optional">es_manager</span></td>
                        <td>¬øTiene jerarqu√≠a de manager?</td>
                        <td>Opcional</td>
                        <td>s√≠ / no</td>
                    </tr>
                    <tr>
                        <td><span class="optional">es_rrhh</span></td>
                        <td>¬øEs personal de RRHH?</td>
                        <td>Opcional</td>
                        <td>s√≠ / no</td>
                    </tr>
                    <tr>
                        <td><span class="optional">fecha_contratacion</span></td>
                        <td>Fecha de contrataci√≥n</td>
                        <td>Opcional</td>
                        <td>15/01/2020</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>üìÖ Formatos de Fecha Aceptados</h2>
            <div class="format-examples">
                <div class="format-example">
                    <strong>dd/mm/yyyy</strong><br>
                    15/01/2020
                </div>
                <div class="format-example">
                    <strong>yyyy-mm-dd</strong><br>
                    2020-01-15
                </div>
                <div class="format-example">
                    <strong>dd-mm-yyyy</strong><br>
                    15-01-2020
                </div>
                <div class="format-example">
                    <strong>mm/dd/yyyy</strong><br>
                    01/15/2020
                </div>
            </div>
        </div>

        <div class="section">
            <h2>‚úÖ Valores Aceptados para Campos Booleanos</h2>
            <div class="info">
                <strong>Para "es_manager" y "es_rrhh":</strong><br>
                <strong>S√≠/Verdadero:</strong> s√≠, si, yes, true, 1<br>
                <strong>No/Falso:</strong> no, false, 0 (o cualquier otro valor)
            </div>
        </div>

        <div class="section">
            <h2>üîß C√≥mo Usar</h2>
            <div class="steps">
                <div class="step">
                    <strong>Descargar la plantilla</strong><br>
                    Descarga el archivo CSV de ejemplo y √∫salo como base.
                </div>
                <div class="step">
                    <strong>Llenar los datos</strong><br>
                    Completa el archivo con la informaci√≥n de tus empleados. Puedes usar Excel o cualquier editor de texto.
                </div>
                <div class="step">
                    <strong>Guardar como CSV</strong><br>
                    Si usas Excel, aseg√∫rate de guardar como "CSV (delimitado por comas)".
                </div>
                <div class="step">
                    <strong>Ejecutar el comando de prueba</strong><br>
                    Primero ejecuta en modo de prueba para verificar que todo est√© correcto.
                </div>
                <div class="step">
                    <strong>Ejecutar la carga real</strong><br>
                    Si la prueba es exitosa, ejecuta el comando final para cargar los datos.
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üíª Comandos para Ejecutar</h2>
            
            <h3>üß™ Modo de Prueba (recomendado primero)</h3>
            <div class="command-box">
python manage.py cargar_empleados_csv plantilla_empleados.csv --test
            </div>
            
            <h3>üíæ Carga Real</h3>
            <div class="command-box">
python manage.py cargar_empleados_csv plantilla_empleados.csv
            </div>
            
            <div class="warning">
                <strong>‚ö†Ô∏è Importante:</strong> Siempre ejecuta primero el modo de prueba (--test) para verificar que los datos sean correctos antes de hacer la carga real.
            </div>
        </div>

        <div class="section">
            <h2>üîê Generaci√≥n de Contrase√±as</h2>
            <div class="info">
                <strong>Contrase√±as autom√°ticas:</strong> El sistema generar√° contrase√±as seguras de 8 caracteres para cada usuario nuevo. Estas contrase√±as se mostrar√°n en la consola durante la ejecuci√≥n del comando.
            </div>
        </div>

        <div class="section">
            <h2>üé≠ Usernames Autom√°ticos</h2>
            <div class="info">
                <strong>Formato:</strong> nombre.apellido (normalizado)<br>
                <strong>Ejemplo:</strong> "Jos√© Mar√≠a" + "Garc√≠a-L√≥pez" = "jose.maria.garcia-lopez"<br>
                Los acentos y caracteres especiales se normalizan autom√°ticamente.
            </div>
        </div>

        <div class="section">
            <h2>üëî Jerarqu√≠as y Managers</h2>
            <div class="info">
                <strong>Campo es_manager:</strong> Si marcas "s√≠", el empleado tendr√° jerarqu√≠a de "manager". Si marcas "no", tendr√° jerarqu√≠a de "auxiliar".<br>
                <strong>Nota:</strong> El sistema calcular√° autom√°ticamente si alguien es manager basado en si tiene empleados a su cargo.
            </div>
        </div>

        <div class="section">
            <h2>üîÑ Actualizaci√≥n vs Creaci√≥n</h2>
            <div class="success">
                <strong>Inteligente:</strong> El sistema detecta autom√°ticamente si un empleado ya existe (por username) y actualiza sus datos en lugar de crear duplicados.
            </div>
        </div>

        <div class="section">
            <h2>üì• Descargar Plantillas</h2>
            <p>Descarga la plantilla de ejemplo para empezar:</p>
            <a href="plantilla_empleados.csv" class="download-btn" download>üìÑ Descargar CSV de Ejemplo</a>
        </div>

        <div class="section">
            <h2>üÜò Soluci√≥n de Problemas</h2>
            <div class="warning">
                <strong>Errores comunes:</strong>
                <ul>
                    <li><strong>Archivo no encontrado:</strong> Verifica que la ruta al archivo CSV sea correcta</li>
                    <li><strong>Columnas faltantes:</strong> Aseg√∫rate de que el CSV tenga al menos: nombre, apellido, email, puesto</li>
                    <li><strong>Formato de fecha:</strong> Usa uno de los formatos aceptados o deja el campo vac√≠o</li>
                    <li><strong>Encoding:</strong> Guarda el archivo CSV con codificaci√≥n UTF-8</li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html>
